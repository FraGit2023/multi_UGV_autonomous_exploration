# 🤖 Multi-TurtleBot3 Autonomous Exploration with ROS 2 and Gazebo

## 📂 Project Structure

```bash
.
├── docker_ws/       # Docker workspace for building the development container
├── ros_ws/          # Main ROS 2 workspace containing all custom and third-party packages
├── chown_me.sh      # Script to fix ownership of files created as root inside the container
├── run.sh           # Script to run the Docker container with correct volumes and permissions
└── exec.sh          # Script to open a shell into a running container
```
### **`ros_ws/src`** contains:

#### **`turtlebot3_gazebo`** 
- Forked and adapted from [ROBOTIS-GIT/turtlebot3_simulations](https://github.com/ROBOTIS-GIT/turtlebot3_simulations)
- Includes robot models and launch files to spawn TurtleBot3 in a Gazebo simulation and establish communication with ROS.

Modifications:
- in the `/launch` folder, a new file `spawn_turtlebot3_robot2.launch.py` has been created, based on the orginal file `spawn_turtlebot3.launch.py` included in the same folder. The new file allows to spawn the correct model of the robot and the usage of correct bridge file;
- in the `/models/turtlebot3_burger` folder, a new file `model_robot2.sdf` has been created, based on the file `model.sdf`. Both files were generated starting from the original file `model.sdf` contained in the folder  `/models/turtlebot3_burger` in [ROBOTIS-GIT/turtlebot3_simulations](https://github.com/ROBOTIS-GIT/turtlebot3_simulations), modified for the correct management of the namespace in both gazebo and ROS2;
- in the `\params` folder, the files `turtlebot3_burger_bridge_robot1.yaml` and `turtlebot3_burger_bridge_robot2.yaml` were generated. These allow the correct management of the topic bridge, for both robots, from gazebo to ROS2 and vice versa;

#### **`turtlebot3_autonomous_exploration`**
Main custom package developed for this project.
```bash
turtlebot3_autonomous_exploration/
├── config/                                     # Configuration files for robot_localization, nav2, slam_toolbox for both robots
│   ├── ekf_robot1.yaml
│   ├── ekf_robot2.yaml  
│   ├── nav2_robot1.yaml
│   ├── nav2_robot2.yaml
│   └── slam_robot1.yaml
│   └── slam_robot2.yaml
│   └── robot_initial_positions.yaml           # Configuraton file needed for global frame 'map' genration and then also for the map merge
├── launch/                 
│   └── multi_r1r2.launch.py                   # Main launch file for the Multi-robot autonomous exploration
│   └── navigation_robot1_launch.py            # modified nav2 file, based on the ROS2 installation file, for the robot1  
│   └── navigation_robot2_launch.py            # modified nav2 file, based on the ROS2 installation file, for the robot1
├── rviz/                  
│   └── global_config.rviz                     # RViz2 configuration file for the global simulation.
├── resource/                                  # Auto-generated by ROS 2; used for resource indexing
├── test/                                      # Default folder for test files (currently unused)
├── turtlebot3_autonomous_exploration/
│   ├── __init__.py                            # Marks the folder as a Python package
│   ├── global_frame_broad.py                  # Generating global frame 'map'
│   ├── global_frontier_detector_node.py       # Frontier detection node working on the merge map
│   ├── global_map_merger_node.py              # Merge robots' maps node
│   ├── greedy_task_allocator_node.py          # Frontier goal assignment node   
├── package.xml                                # Package metadata and dependencies
├── setup.cfg                                  # Makes package discoverable by ros2 run
└── setup.py                                   # Installation script
```

---
# 🚀 How to Run the Simulation

## 1. Build the Docker Image
```bash
cd docker_ws
chmod +x build.sh
./build.sh
```

> Ensure scripts are executable:
```bash
cd ..
chmod +x run.sh exec.sh chown_me.sh
```
## 2. Run the Docker Container
```bash
./run.sh
```

## 3. Inside the Container
Run the following commands:
```
source /opt/ros/jazzy/setup.bash
export TURTLEBOT3_MODEL=burger
cd /root/ros_workspace
colcon build
source install/setup.bash
ros2 launch turtlebot3_autonomous_exploration multi_r1r2.launch.py
```

RViz2 and Gazebo should start and show the simulation in real time.

---
# 🌍📍 Switching Simulation Environments and Initial Positions
🌍 To *__change the simulated world__*: 

1. Go to :
  ```bash
  ros_ws/src/turtlebot3_autonomous_exploration/launch/multi_r1r2.launch.py
  ```
2. On __lines 56 and 57__, two worlds can be chosen: __custom_house.world__ or __turtlebot3_dqn_stage4.world__. Commenting one of the two lines, the world related to the de-commented line will start.

---
📍 To *__change the initial positions__* of the robots:

1. Go to :
  ```bash
  ros_ws/src/turtlebot3_autonomous_exploration/launch/multi_r1r2.launch.py
  ```
2. On lines __37-38 and 40-41__, the initial positions of the robots can be changed. The initial positions must be chosen appropriately, ensuring that the robots are not spawn on obstacles or outside the map.
   > recommended starting positions:    
   > **turtlebot3_dqn_stage4.world**  
   > x_pose_robot1 : -2.0  
   > y_pose_robot1 : -0.5  
   > x_pose_robot2 : -2.0  
   > y_pose_robot2 :  0.5
     
   > ---
   > **custom_house.world**  
   > x_pose_robot1 : -1.0   
   > y_pose_robot1 : -1.0  
   > x_pose_robot2 :  3.0  
   > y_pose_robot2 :  0.0

3. Go to:
  ```bash
  ros_ws/src/turtlebot3_autonomous_exploration/config/robot_initial_positions.yaml
  ``` 
  and specify the  same initial positions set in the launch file. This allows the correct functioning of the node that generates the global frame map and, consequently, also of the node that merges the maps.








